{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/img/error-icon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default async function (searchRequest, page, perPage) {\n    return await axios.get(buildRequestURL(searchRequest, page, perPage));\n      \n}\n\nfunction buildRequestURL(q, page, per_page) {\n    const host = 'https://pixabay.com/api/'\n    const key = '46357253-cea0b9d68f62a9d404cc68056';\n    let image_type = 'photo';\n    let orientation = 'horizontal';\n    let safesearch = true;\n    const searchParams = new URLSearchParams({\n        key,\n        q,\n        image_type,\n        orientation,\n        safesearch, \n        page, \n        per_page\n    })\n    return `${host}?${searchParams}`\n}","export default \"data:image/svg+xml,%3c!--%20Generated%20by%20IcoMoon.io%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fafafb'%20d='M9.080%200.292c0.187-0.187%200.441-0.292%200.706-0.292h12.428c0.265%200%200.519%200.105%200.706%200.292l8.788%208.788c0.187%200.187%200.292%200.441%200.292%200.706v12.428c0%200.265-0.105%200.519-0.292%200.706l-8.788%208.788c-0.187%200.187-0.441%200.292-0.706%200.292h-12.428c-0.265%200-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265%200.105-0.519%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fafafb'%20d='M9.292%209.292c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.132%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217l5.292%205.294%205.292-5.294c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.131%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325l-5.294%205.292%205.294%205.292c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325s-0.203%200.167-0.325%200.217c-0.121%200.050-0.252%200.076-0.383%200.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292%205.294c-0.093%200.093-0.203%200.167-0.325%200.217s-0.252%200.076-0.383%200.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262%200.076-0.383c0.050-0.121%200.124-0.232%200.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132%200.026-0.262%200.076-0.383s0.124-0.232%200.217-0.325z'%3e%3c/path%3e%3c/svg%3e\"","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport pathIcon from \"../img/error-icon.svg\";\n\nconst galleryNode = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.loader');\n\nexport default function (images) {\n    loader.classList.add('hidden')\n    if (images.length === 0) {\n        showMessage('Sorry, there are no images matching your search query. Please try again!', 'error')\n        return\n    }\n\n    const markup = images.reduce((string, image) =>  {\n        return `${string}\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img \n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags}\"\n                />\n            </a>\n            <div class=\"gallery-descr\">\n                <div class=\"gallery-descr-itm\">\n                    <p class=\"gallery-descr-header\">Likes</p>\n                    <p class=\"gallery-descr-text\">${image.likes}</p>\n                </div>\n                <div class=\"gallery-descr-itm\">\n                    <p class=\"gallery-descr-header\">Views</p>\n                    <p class=\"gallery-descr-text\">${image.views}</p>\n                </div>\n                <div class=\"gallery-descr-itm\">\n                    <p class=\"gallery-descr-header\">Comments</p>\n                    <p class=\"gallery-descr-text\">${image.comments}</p>\n                </div>\n                <div class=\"gallery-descr-itm\">\n                    <p class=\"gallery-descr-header\">Downloads</p>\n                    <p class=\"gallery-descr-text\">${image.downloads}</p>\n                </div>\n            </div>\n        </li>`\n    }, '');\n    \n    galleryNode.insertAdjacentHTML('beforeend', markup);\n    let gallery = new SimpleLightbox('.gallery-link', {captionsData: 'alt', overlayOpacity: 0.5});\n\n    gallery.refresh();\n}\n\nexport function showMessage(message, type) {\n    let backgroundColor = '#59A10D';\n    let borderColor = '#B5EA7C';\n    let iconUrl = '';\n    let iconColor = backgroundColor;\n    if (type === 'error') {\n        backgroundColor = '#EF4040';\n        borderColor = '#FFBEBE';\n        iconUrl = pathIcon;\n        iconColor = '#fff';\n        loader.classList.add('hidden')\n    } \n\n    iziToast.show({\n        class: 'toast-message',\n        message,\n        messageColor: '#fff',\n        iconUrl,\n        iconColor,\n        backgroundColor,\n        border: `2px solid ${borderColor}`,\n        position: 'topRight',\n    })\n}","import fetchImages from \"./js/pixabay-api\";\nimport renderImages from \"./js/render-functions\";\nimport {showMessage} from \"./js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst moreBtn = document.querySelector('.more-btn');\nconst galleryNode = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.loader');\nconst counter = document.querySelector('.counter');\nconst tooltip = document.querySelector('.tooltip');\n\nlet searchRequest = '';\nlet page = 1;\nlet perPage = 15;\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault()\n    galleryNode.innerHTML = '';\n    counter.innerHTML = '';\n    moreBtn.classList.add('hidden')\n    tooltip.classList.add('hidden')\n\n    searchRequest = event.target.elements.searchRequest.value.trim();\n    if (searchRequest === '') {\n        showMessage('Fill search field please')\n        return\n    }\n    loader.classList.remove('hidden')\n    page = 1;\n    fetchImages(searchRequest, page, perPage)\n        .then((response) => countPages(response.data))\n        .catch((error) => showMessage(error, \"error\"));\n});\n\nmoreBtn.addEventListener('click', () => {\n    page++;\n    moreBtn.classList.add('hidden')\n    loader.classList.remove('hidden')\n    fetchImages(searchRequest, page, perPage)\n        .then((response) => countPages(response.data))\n        .catch((error) => showMessage(error));\n})\n\nfunction countPages (response) {\n    const totalPages = Math.ceil(response.totalHits / perPage);\n    if (page < totalPages) {\n        moreBtn.classList.remove('hidden')\n        counter.innerHTML = `Page ${page} of ${totalPages}`;        \n\n        renderImages(response.hits)\n    } else {\n        if (page > 1) {\n            counter.innerHTML = `Page ${page} of ${totalPages}`;\n            tooltip.classList.remove('hidden')\n        }\n        renderImages(response.hits)      \n    }\n\n}"],"names":["fetchImages","searchRequest","page","perPage","axios","buildRequestURL","q","per_page","host","key","image_type","orientation","safesearch","searchParams","pathIcon","galleryNode","loader","renderImages","images","showMessage","markup","string","image","SimpleLightbox","message","type","backgroundColor","borderColor","iconUrl","iconColor","iziToast","form","moreBtn","counter","tooltip","event","response","countPages","error","totalPages"],"mappings":"owBAEe,eAAAA,EAAgBC,EAAeC,EAAMC,EAAS,CACzD,OAAO,MAAMC,EAAM,IAAIC,EAAgBJ,EAAeC,EAAMC,CAAO,CAAC,CAExE,CAEA,SAASE,EAAgBC,EAAGJ,EAAMK,EAAU,CACxC,MAAMC,EAAO,2BACPC,EAAM,qCACZ,IAAIC,EAAa,QACbC,EAAc,aACdC,EAAa,GACjB,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAAJ,EACA,EAAAH,EACA,WAAAI,EACA,YAAAC,EACA,WAAAC,EACA,KAAAV,EACA,SAAAK,CACR,CAAK,EACD,MAAO,GAAGC,CAAI,IAAIK,CAAY,EAClC,CCvBA,MAAeC,EAAA,m8DCQTC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EAEhC,SAAQC,EAAEC,EAAQ,CAE7B,GADAF,EAAO,UAAU,IAAI,QAAQ,EACzBE,EAAO,SAAW,EAAG,CACrBC,EAAY,2EAA4E,OAAO,EAC/F,MACH,CAED,MAAMC,EAASF,EAAO,OAAO,CAACG,EAAQC,IAC3B,GAAGD,CAAM;AAAA;AAAA,4CAEoBC,EAAM,aAAa;AAAA;AAAA;AAAA,uBAGxCA,EAAM,YAAY;AAAA,uBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAMmBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,oDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,oDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,oDAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,eAI5D,EAAE,EAELP,EAAY,mBAAmB,YAAaK,CAAM,EACpC,IAAIG,EAAe,gBAAiB,CAAC,aAAc,MAAO,eAAgB,EAAG,CAAC,EAEpF,QAAO,CACnB,CAEO,SAASJ,EAAYK,EAASC,EAAM,CACvC,IAAIC,EAAkB,UAClBC,EAAc,UACdC,EAAU,GACVC,EAAYH,EACZD,IAAS,UACTC,EAAkB,UAClBC,EAAc,UACdC,EAAUd,EACVe,EAAY,OACZb,EAAO,UAAU,IAAI,QAAQ,GAGjCc,EAAS,KAAK,CACV,MAAO,gBACP,QAAAN,EACA,aAAc,OACd,QAAAI,EACA,UAAAC,EACA,gBAAAH,EACA,OAAQ,aAAaC,CAAW,GAChC,SAAU,UAClB,CAAK,CACL,CC1EA,MAAMI,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,WAAW,EAC5CjB,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCiB,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIjC,EAAgB,GAChBC,EAAO,EACPC,EAAU,GAEd4B,EAAK,iBAAiB,SAAWI,GAAU,CAQvC,GAPAA,EAAM,eAAgB,EACtBpB,EAAY,UAAY,GACxBkB,EAAQ,UAAY,GACpBD,EAAQ,UAAU,IAAI,QAAQ,EAC9BE,EAAQ,UAAU,IAAI,QAAQ,EAE9BjC,EAAgBkC,EAAM,OAAO,SAAS,cAAc,MAAM,OACtDlC,IAAkB,GAAI,CACtBkB,EAAY,0BAA0B,EACtC,MACH,CACDH,EAAO,UAAU,OAAO,QAAQ,EAChCd,EAAO,EACPF,EAAYC,EAAeC,EAAMC,CAAO,EACnC,KAAMiC,GAAaC,EAAWD,EAAS,IAAI,CAAC,EAC5C,MAAOE,GAAUnB,EAAYmB,EAAO,OAAO,CAAC,CACrD,CAAC,EAEDN,EAAQ,iBAAiB,QAAS,IAAM,CACpC9B,IACA8B,EAAQ,UAAU,IAAI,QAAQ,EAC9BhB,EAAO,UAAU,OAAO,QAAQ,EAChChB,EAAYC,EAAeC,EAAMC,CAAO,EACnC,KAAMiC,GAAaC,EAAWD,EAAS,IAAI,CAAC,EAC5C,MAAOE,GAAUnB,EAAYmB,CAAK,CAAC,CAC5C,CAAC,EAED,SAASD,EAAYD,EAAU,CAC3B,MAAMG,EAAa,KAAK,KAAKH,EAAS,UAAYjC,CAAO,EACrDD,EAAOqC,GACPP,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAQ,UAAY,QAAQ/B,CAAI,OAAOqC,CAAU,GAEjDtB,EAAamB,EAAS,IAAI,IAEtBlC,EAAO,IACP+B,EAAQ,UAAY,QAAQ/B,CAAI,OAAOqC,CAAU,GACjDL,EAAQ,UAAU,OAAO,QAAQ,GAErCjB,EAAamB,EAAS,IAAI,EAGlC"}